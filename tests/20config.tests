TESTING "test configuration system" ./test-config

TEST "initializing config system" init <<END
out: initialized
out: destroyed
END


PLANNED "loading configfile, simple"  <<END
END


PLANNED "loading configfile, with includes"  <<END
END


PLANNED "env var override"  <<END
END


PLANNED "lowlevel get"  <<END
END


PLANNED "lowlevel set"  <<END
END


PLANNED "saving simple configfile"  <<END
END


PLANNED "complex saving user file"  <<END
END


TEST "number get, default" number_get test.number.1 '1234567890 # comment' <<END
out: 1234567890
END

export LUMIERA_TEST_NUMBER_1=987654321
TEST "number get, env override" number_get test.number.1 '1234567890 # comment' <<END
out: 987654321
END

export LUMIERA_TEST_NUMBER_1=barf
TEST "number get, type error" number_get_nodefault test.number.1 <<END
out: LUMIERA_ERROR_CONFIG_TYPE:value has wrong type
END
unset LUMIERA_TEST_NUMBER_1


TEST "number get, syntax error" number_get no:fun:blah '1234567890 # comment' <<END
out: LUMIERA_ERROR_CONFIG_SYNTAX_KEY:syntax error in key
END


TEST "number get, no default, no env" number_get_nodefault test.number.1 <<END
out: LUMIERA_ERROR_CONFIG_NO_ENTRY:no configuration entry
END


PLANNED "number set"  <<END
END


PLANNED "real get"  <<END
END


PLANNED "real set"  <<END
END


PLANNED "string get"  <<END
END


PLANNED "string set"  <<END
END


PLANNED "word get"  <<END
END


PLANNED "word set"  <<END
END


PLANNED "bool get"  <<END
END


PLANNED "bool set"  <<END
END

